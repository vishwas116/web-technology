<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Auth System (Single File)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f1f5f9;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 350px;
    }
    h2 { text-align: center; }
    input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      border: none;
      border-radius: 8px;
      background-color: #4CAF50;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover { background-color: #45a049; }
    .link {
      text-align: center;
      margin-top: 10px;
      color: #007bff;
      cursor: pointer;
    }
    #profile {
      text-align: center;
    }
    #profile p {
      font-size: 18px;
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Registration Form -->
    <div id="registerDiv">
      <h2>Register</h2>
      <input type="text" id="regName" placeholder="Full Name" required>
      <input type="email" id="regEmail" placeholder="Email" required>
      <input type="password" id="regPassword" placeholder="Password" required>
      <button onclick="registerUser()">Register</button>
      <div class="link" onclick="showLogin()">Already have an account? Login</div>
    </div>

    <!-- Login Form -->
    <div id="loginDiv" style="display:none;">
      <h2>Login</h2>
      <input type="email" id="loginEmail" placeholder="Email" required>
      <input type="password" id="loginPassword" placeholder="Password" required>
      <button onclick="loginUser()">Login</button>
      <div class="link" onclick="showRegister()">New user? Register</div>
    </div>

    <!-- Profile Page -->
    <div id="profile" style="display:none;">
      <h2>Profile</h2>
      <p><strong>Name:</strong> <span id="profileName"></span></p>
      <p><strong>Email:</strong> <span id="profileEmail"></span></p>
      <button onclick="logout()">Logout</button>
    </div>
  </div>

  <script>
    // Show Login/Register/Profile Sections
    function showLogin() {
      document.getElementById('registerDiv').style.display = 'none';
      document.getElementById('loginDiv').style.display = 'block';
      document.getElementById('profile').style.display = 'none';
    }

    function showRegister() {
      document.getElementById('registerDiv').style.display = 'block';
      document.getElementById('loginDiv').style.display = 'none';
      document.getElementById('profile').style.display = 'none';
    }

    function showProfile() {
      document.getElementById('registerDiv').style.display = 'none';
      document.getElementById('loginDiv').style.display = 'none';
      document.getElementById('profile').style.display = 'block';
    }

    // Register user
    function registerUser() {
      const name = document.getElementById('regName').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const password = document.getElementById('regPassword').value.trim();

      if (!name || !email || !password) {
        alert("Please fill all fields!");
        return;
      }

      const users = JSON.parse(localStorage.getItem('users')) || [];
      const existingUser = users.find(u => u.email === email);

      if (existingUser) {
        alert("User already exists!");
        return;
      }

      users.push({ name, email, password });
      localStorage.setItem('users', JSON.stringify(users));
      alert("Registration successful! Please login.");
      showLogin();
    }

    // Login user
    function loginUser() {
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value.trim();

      const users = JSON.parse(localStorage.getItem('users')) || [];
      const user = users.find(u => u.email === email && u.password === password);

      if (!user) {
        alert("Invalid email or password!");
        return;
      }

      localStorage.setItem('loggedInUser', JSON.stringify(user));
      loadProfile();
      showProfile();
    }

    // Load Profile Data
    function loadProfile() {
      const user = JSON.parse(localStorage.getItem('loggedInUser'));
      if (user) {
        document.getElementById('profileName').innerText = user.name;
        document.getElementById('profileEmail').innerText = user.email;
      }
    }

    // Logout
    function logout() {
      localStorage.removeItem('loggedInUser');
      showLogin();
    }

    // Auto-login if user already logged in
    window.onload = function() {
      const loggedInUser = localStorage.getItem('loggedInUser');
      if (loggedInUser) {
        loadProfile();
        showProfile();
      }
    }
  </script>
</body>
</html>
